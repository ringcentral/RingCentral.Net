Install this extension if you want to use Pub\+Nub and your app targets traditional .NET framework.

Check \href{../RingCentral.Net.PubnubPCL}{\texttt{ Ring\+Central.\+Net.\+Pubnub\+PCL}} if your app targets .NET Core, Mono, Xamarin...etc.


\begin{DoxyCode}{0}
\DoxyCodeLine{var rc = \textcolor{keyword}{new} RestClient(}
\DoxyCodeLine{    Environment.GetEnvironmentVariable(\textcolor{stringliteral}{"{}RINGCENTRAL\_CLIENT\_ID"{}}),}
\DoxyCodeLine{    Environment.GetEnvironmentVariable(\textcolor{stringliteral}{"{}RINGCENTRAL\_CLIENT\_SECRET"{}}),}
\DoxyCodeLine{    Environment.GetEnvironmentVariable(\textcolor{stringliteral}{"{}RINGCENTRAL\_SERVER\_URL"{}})}
\DoxyCodeLine{);}
\DoxyCodeLine{var pubNubExtension = \textcolor{keyword}{new} PubNubExtension();}
\DoxyCodeLine{await rc.InstallExtension(pubNubExtension);}
\DoxyCodeLine{}
\DoxyCodeLine{var eventFilters = \textcolor{keyword}{new}[]}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{stringliteral}{"{}/restapi/v1.0/account/\string~/extension/\string~/presence?detailedTelephonyState=true"{}},}
\DoxyCodeLine{    \textcolor{stringliteral}{"{}/restapi/v1.0/account/\string~/extension/\string~/message-\/store"{}}}
\DoxyCodeLine{\};}
\DoxyCodeLine{var subscription = await pubNubExtension.Subscribe(eventFilters, message =>}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{comment}{// do something with message}}
\DoxyCodeLine{\});}

\end{DoxyCode}
\hypertarget{md_RingCentral_Net_Pubnub_README_autotoc_md477}{}\doxysection{Pub\+Nub notification delay issue}\label{md_RingCentral_Net_Pubnub_README_autotoc_md477}
If you create multiple subscriptions in a single app and run the app in .NET Framework environment, you may experience notifications delay. Delay time is around 4 minutes and 30 seconds.

A solution/workaround is to add the following to your {\ttfamily app.\+config} file\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{<\textcolor{keywordtype}{system.net}>}
\DoxyCodeLine{<\textcolor{keywordtype}{connectionManagement}>}
\DoxyCodeLine{<\textcolor{keywordtype}{add} \textcolor{keyword}{address} = \textcolor{stringliteral}{"{}*"{}} \textcolor{keyword}{maxconnection} = \textcolor{stringliteral}{"{}999"{}} />}
\DoxyCodeLine{</\textcolor{keywordtype}{connectionManagement}>}
\DoxyCodeLine{</\textcolor{keywordtype}{system.net}>}

\end{DoxyCode}


Notes\+:
\begin{DoxyItemize}
\item If you run your app in .NET Core environment, you will not have this issue.
\item If you only create one subscription in your code, you will not have this issue either.
\item This is because \href{https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/network/add-element-for-connectionmanagement-network-settings}{\texttt{ by default only 2 connections to a server is allowed}}.
\item More information FYI\+: \href{https://stackoverflow.com/a/49868185/862862}{\texttt{ https\+://stackoverflow.\+com/a/49868185/862862}}
\end{DoxyItemize}\hypertarget{md_RingCentral_Net_Pubnub_README_autotoc_md478}{}\doxysection{More documentation}\label{md_RingCentral_Net_Pubnub_README_autotoc_md478}
This extension is inspired by \href{https://github.com/ringcentral/ringcentral-extensible/tree/master/packages/extensions/pubnub}{\texttt{ its Type\+Script counterpart}}, check its documentation for more information. 